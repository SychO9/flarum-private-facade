{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@sycho/flarum-private-facade/webpack/bootstrap","webpack://@sycho/flarum-private-facade/webpack/runtime/compat get default export","webpack://@sycho/flarum-private-facade/webpack/runtime/define property getters","webpack://@sycho/flarum-private-facade/webpack/runtime/hasOwnProperty shorthand","webpack://@sycho/flarum-private-facade/webpack/runtime/make namespace object","webpack://@sycho/flarum-private-facade/external root \"flarum.reg.get('core', 'admin/app')\"","webpack://@sycho/flarum-private-facade/external root \"flarum.reg.get('core', 'common/extenders')\"","webpack://@sycho/flarum-private-facade/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@sycho/flarum-private-facade/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@sycho/flarum-private-facade/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@sycho/flarum-private-facade/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@sycho/flarum-private-facade/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@sycho/flarum-private-facade/./src/admin/components/UploadImageButton.tsx","webpack://@sycho/flarum-private-facade/./src/admin/extend.tsx","webpack://@sycho/flarum-private-facade/./src/admin/index.tsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extenders');","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Button');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport app from 'flarum/admin/app';\nimport Button from 'flarum/common/components/Button';\nexport default class UploadImageButton extends Button {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"loading\", false);\n  }\n  view(vnode) {\n    this.attrs.loading = this.loading;\n    this.attrs.className = (this.attrs.className || '') + ' Button';\n    if (app.data.settings[this.attrs.setting]) {\n      this.attrs.onclick = this.remove.bind(this);\n      return m(\"div\", {\n        className: \"UploadImageButton-container\"\n      }, m(\"div\", {\n        className: \"UploadImageButton-image-container\"\n      }, m(\"img\", {\n        className: \"UploadImageButton-image\",\n        src: app.forum.attribute(this.attrs.serializedName),\n        alt: \"\"\n      })), super.view(_objectSpread(_objectSpread({}, vnode), {}, {\n        children: m('[', null, app.translator.trans('core.admin.upload_image.remove_button'))\n      })));\n    } else {\n      this.attrs.onclick = this.upload.bind(this);\n    }\n\n    // @ts-ignore\n    return super.view(_objectSpread(_objectSpread({}, vnode), {}, {\n      children: m('[', null, app.translator.trans('core.admin.upload_image.upload_button'))\n    }));\n  }\n\n  /**\n   * Prompt the user to upload an image.\n   */\n  upload() {\n    if (this.loading) return;\n    const $input = $('<input type=\"file\">');\n    $input.appendTo('body').hide().click().on('change', e => {\n      const body = new FormData();\n      // @ts-ignore\n      body.append(this.attrs.name, $(e.target)[0].files[0]);\n      this.loading = true;\n      m.redraw();\n      app.request({\n        method: 'POST',\n        url: this.resourceUrl(),\n        serialize: raw => raw,\n        body\n      }).then(this.success.bind(this), this.failure.bind(this));\n    });\n  }\n\n  /**\n   * Remove the logo.\n   */\n  remove() {\n    this.loading = true;\n    m.redraw();\n    app.request({\n      method: 'DELETE',\n      url: this.resourceUrl()\n    }).then(this.success.bind(this), this.failure.bind(this));\n  }\n  resourceUrl() {\n    return app.forum.attribute('apiUrl') + '/' + this.attrs.routeName;\n  }\n\n  /**\n   * After a successful upload/removal, reload the page.\n   */\n  success() {\n    window.location.reload();\n  }\n\n  /**\n   * If upload/removal fails, stop loading.\n   */\n  failure() {\n    this.loading = false;\n    m.redraw();\n  }\n}\nflarum.reg.add('sychoprivate-facade', 'admin/components/UploadImageButton', UploadImageButton);","import Extend from 'flarum/common/extenders';\nimport UploadImageButton from './components/UploadImageButton';\nexport default [new Extend.Admin().setting(() => ({\n  setting: 'sycho-private-facade.header_layout',\n  label: app.translator.trans('sycho-private-facade.admin.settings.header_layout.title'),\n  default: 'show_only_logo',\n  options: {\n    show_header: app.translator.trans('sycho-private-facade.admin.settings.header_layout.options.show_header'),\n    show_only_logo: app.translator.trans('sycho-private-facade.admin.settings.header_layout.options.show_only_logo'),\n    hide_secondary_items: app.translator.trans('sycho-private-facade.admin.settings.header_layout.options.hide_secondary_items')\n  },\n  type: 'select'\n})).setting(() => function () {\n  const useWelcomeBannerValue = this.setting('sycho-private-facade.use_welcome_hero_text')();\n  console.log(typeof useWelcomeBannerValue, useWelcomeBannerValue);\n  // @ts-ignore\n  const useWelcomeBanner = useWelcomeBannerValue === true || useWelcomeBannerValue === '1';\n  return m(\"div\", {\n    className: \"Form-group BasicsPage-welcomeBanner-input PrivateFacade-screenBanner\"\n  }, m(\"label\", null, app.translator.trans('sycho-private-facade.admin.settings.screen_banner_heading')), m(\"input\", {\n    disabled: useWelcomeBanner,\n    type: \"text\",\n    className: \"FormControl\",\n    placeholder: app.translator.trans('sycho-private-facade.admin.settings.screen_banner_title'),\n    \"aria-label\": app.translator.trans('sycho-private-facade.admin.settings.screen_banner_title'),\n    bidi: this.setting('sycho-private-facade.screen_banner_title')\n  }), m(\"textarea\", {\n    disabled: useWelcomeBanner,\n    className: \"FormControl\",\n    placeholder: app.translator.trans('sycho-private-facade.admin.settings.screen_banner_description'),\n    \"aria-label\": app.translator.trans('sycho-private-facade.admin.settings.screen_banner_description'),\n    bidi: this.setting('sycho-private-facade.screen_banner_message')\n  }));\n}).setting(() => ({\n  setting: 'sycho-private-facade.use_welcome_hero_text',\n  label: app.translator.trans('sycho-private-facade.admin.settings.use_welcome_hero_text'),\n  default: true,\n  type: 'boolean'\n})).setting(() => ({\n  setting: 'sycho-private-facade.primary_color_bg',\n  label: app.translator.trans('sycho-private-facade.admin.settings.primary_color_bg'),\n  default: true,\n  type: 'boolean'\n})).setting(() => ({\n  setting: 'sycho-private-facade.force_redirect',\n  label: app.translator.trans('sycho-private-facade.admin.settings.force_redirect'),\n  default: true,\n  type: 'boolean'\n})).setting(() => ({\n  setting: 'sycho-private-facade.route_exclusions',\n  label: app.translator.trans('sycho-private-facade.admin.settings.route_exclusions'),\n  type: 'text'\n})).setting(() => ({\n  setting: 'sycho-private-facade.url_exclusions',\n  label: app.translator.trans('sycho-private-facade.admin.settings.url_exclusions'),\n  type: 'text'\n})).setting(() => function () {\n  return m(\"div\", {\n    className: \"Form-group HeroImageForm\"\n  }, m(\"label\", {\n    for: \"sycho-private-facade.illustration_path\"\n  }, app.translator.trans('sycho-private-facade.admin.settings.illustration_path')), m(UploadImageButton, {\n    setting: \"sycho-private-facade.illustration_path\",\n    serializedName: \"sycho-private-facade.illustration_url\",\n    routeName: \"private_facade_illustration\",\n    name: \"private_facade_illustration\"\n  }));\n})];","import app from 'flarum/admin/app';\nexport { default as extend } from './extend';\napp.initializers.add('sycho/flarum-private-facade', app => {\n  //\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","reg","_typeof","iterator","constructor","_defineProperty","e","r","t","i","toPrimitive","TypeError","String","toPropertyKey","configurable","writable","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","push","apply","_objectSpread","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","UploadImageButton","super","this","view","vnode","attrs","loading","className","settings","setting","onclick","remove","bind","m","src","attribute","serializedName","alt","children","trans","upload","$","appendTo","hide","click","on","body","FormData","append","name","target","files","redraw","method","url","resourceUrl","serialize","raw","then","success","failure","routeName","window","location","reload","add","label","app","translator","default","options","show_header","show_only_logo","hide_secondary_items","type","useWelcomeBannerValue","console","log","useWelcomeBanner","disabled","placeholder","bidi","for"],"sourceRoot":""}