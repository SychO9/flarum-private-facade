(()=>{var t={n:e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},d:(e,r)=>{for(var a in r)t.o(r,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:r[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e);const r=flarum.core.compat["forum/app"];var a=t.n(r);function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function c(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e)}const n=flarum.core.compat["common/Component"];var i=t.n(n);const l=flarum.core.compat["forum/components/LogInModal"];var s=t.n(l);const u=flarum.core.compat["common/helpers/icon"];var h=t.n(u);function f(t,e){var r=null==t?void 0:t.children;return r instanceof Array&&"map"in r&&(t.children=null==r?void 0:r.map(e).map((function(t){var r;return(null==(r=(null==t?void 0:t.children)||null)?void 0:r.length)&&f(t,e)||t}))),t}var v=function(t){function e(){return t.apply(this,arguments)||this}return c(e,t),e.prototype.view=function(){return m(p,{routeSwitcher:this.attrs.routeSwitcher,animateShow:function(){return null}})},e}(i()),p=function(t){function e(){return t.apply(this,arguments)||this}c(e,t);var r=e.prototype;return r.title=function(){return[h()("fas fa-sign-in-alt"),t.prototype.title.call(this)]},r.view=function(){var e,r=this,a=t.prototype.view.call(this);return f(a,(function(e){var a;return null!=e&&null!=(a=e.attrs)&&null!=(a=a.className)&&a.includes("Modal-header")&&e.children.push(t.prototype.footer.call(r)[0]),e})),a.attrs.className=null==(e=a.attrs)||null==(e=e.className)?void 0:e.replace("fade",""),a},r.footer=function(){var e=t.prototype.footer.call(this);return delete e[0],e[1]=this.attrs.routeSwitcher(),e},e}(s());p.isDismissible=!1;var d=function(t){function e(){return t.apply(this,arguments)||this}return c(e,t),e.prototype.view=function(){var t=a().forum.attribute("sycho-private-facade.illustration_url");return t?m("img",{src:t,alt:""}):m("svg",{width:"900",height:"600",viewBox:"0 0 900 600",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m("path",{fill:"transparent",d:"M0 0h900v600H0z"}),m("rect",{x:"342.141",y:"162",width:"42.461",height:"112.141",rx:"21.231",transform:"rotate(90 342.141 162)",fill:"#E1E4E5"}),m("rect",{x:"337.265",y:"166.331",width:"33.751",height:"33.751",rx:"16.876",transform:"rotate(90 337.265 166.331)",fill:"#fff"}),m("rect",{x:"516.369",y:"401",width:"42.461",height:"112.141",rx:"21.231",transform:"rotate(90 516.369 401)",fill:"#E1E4E5"}),m("rect",{x:"511.493",y:"405.331",width:"33.751",height:"33.751",rx:"16.876",transform:"rotate(90 511.493 405.331)",fill:"#fff"}),m("rect",{x:"141.84",y:"291.334",width:"161.335",height:"161.335",rx:"80.668",fill:"#666AF6"}),m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M259.171 405.842v5.394c0 2.977-2.385 5.394-5.323 5.394h-63.876c-2.939 0-5.323-2.417-5.323-5.394v-5.481c0-16.322 18.407-26.926 37.261-26.926 18.854 0 37.261 10.61 37.261 26.926m-23.901-74.313c7.381 7.381 7.381 19.348 0 26.729-7.381 7.382-19.349 7.382-26.73 0-7.381-7.381-7.381-19.348 0-26.729s19.349-7.381 26.73 0z",fill:"#fff"}),m("rect",{x:"584.96",y:"317.464",width:"161.335",height:"161.335",rx:"80.668",fill:"#666AF6"}),m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M702.292 431.972v5.394c0 2.977-2.385 5.394-5.323 5.394h-63.877c-2.938 0-5.323-2.417-5.323-5.394v-5.481c0-16.322 18.407-26.927 37.261-26.927 18.855 0 37.262 10.61 37.262 26.927m-23.902-74.313c7.381 7.381 7.381 19.348 0 26.729-7.381 7.382-19.348 7.382-26.729 0-7.382-7.381-7.382-19.348 0-26.729 7.381-7.381 19.348-7.381 26.729 0z",fill:"#fff"}),m("rect",{x:"370",y:"181",width:"161.335",height:"161.335",rx:"80.668",fill:"#666AF6"}),m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M487.331 295.507v5.394c0 2.978-2.385 5.394-5.323 5.394h-63.876c-2.938 0-5.323-2.416-5.323-5.394v-5.48c0-16.322 18.407-26.927 37.261-26.927 18.854 0 37.261 10.61 37.261 26.927m-23.901-74.313c7.381 7.381 7.381 19.348 0 26.729-7.382 7.381-19.349 7.381-26.73 0s-7.381-19.348 0-26.729c7.381-7.382 19.348-7.382 26.73 0z",fill:"#fff"}),m("path",{d:"M259.701 232.542h.147c.874 12.56 10.079 12.753 10.079 12.753s-10.15.201-10.15 14.714c0-14.513-10.151-14.714-10.151-14.714s9.201-.193 10.075-12.753zm303.761 89.277h.147c.874 12.56 10.079 12.753 10.079 12.753s-10.151.202-10.151 14.714c0-14.512-10.15-14.714-10.15-14.714s9.201-.193 10.075-12.753zm-218.839 29.397h.148c.873 12.559 10.079 12.753 10.079 12.753s-10.151.201-10.151 14.713c0-14.512-10.151-14.713-10.151-14.713s9.202-.194 10.075-12.753zm27.452-212.791h.148c.873 12.559 10.079 12.753 10.079 12.753s-10.151.201-10.151 14.713c0-14.512-10.151-14.713-10.151-14.713s9.202-.194 10.075-12.753zm222.918 53.989h.071c.422 6.062 4.865 6.155 4.865 6.155s-4.9.097-4.9 7.102c0-7.005-4.899-7.102-4.899-7.102s4.441-.093 4.863-6.155zm-468.977 116.34h.072c.421 6.063 4.864 6.156 4.864 6.156s-4.899.097-4.899 7.102c0-7.005-4.899-7.102-4.899-7.102s4.441-.093 4.862-6.156zm-9.798 121.94h.071c.422 6.062 4.865 6.156 4.865 6.156s-4.9.097-4.9 7.101c0-7.004-4.899-7.101-4.899-7.101s4.441-.094 4.863-6.156zm657.604-71.857h.071c.422 6.062 4.865 6.155 4.865 6.155s-4.9.097-4.9 7.102c0-7.005-4.899-7.102-4.899-7.102s4.441-.093 4.863-6.155z",fill:"#E1E4E5"}),m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M735.689 297.235h3.597c.87 0 1.57.708 1.57 1.57v3.598c0 .869-.707 1.57-1.57 1.57h-3.597c-.863 0-1.57-.708-1.57-1.57v-3.598c-.008-.862.7-1.57 1.57-1.57zm12.472 0h3.597c.863 0 1.571.708 1.571 1.57v3.598c0 .869-.708 1.57-1.571 1.57h-3.597c-.862 0-1.57-.708-1.57-1.57v-3.598c0-.862.708-1.57 1.57-1.57zm12.481 0h3.597c.862 0 1.57.708 1.57 1.57v3.598c0 .869-.708 1.57-1.57 1.57h-3.597a1.577 1.577 0 0 1-1.571-1.57v-3.598a1.568 1.568 0 0 1 1.571-1.57zm12.472 0h3.597c.863 0 1.57.708 1.57 1.57v3.598c0 .869-.707 1.57-1.57 1.57h-3.597c-.87 0-1.578-.708-1.578-1.57v-3.598a1.588 1.588 0 0 1 1.578-1.57zm12.473 0h3.597c.87 0 1.578.708 1.578 1.57v3.598c0 .869-.708 1.57-1.578 1.57h-3.597c-.863 0-1.57-.708-1.57-1.57v-3.598c0-.862.707-1.57 1.57-1.57zm-36.969 13.601h3.598c.862 0 1.57.707 1.57 1.57v3.604c0 .863-.708 1.571-1.57 1.571h-3.598c-.869 0-1.57-.708-1.57-1.571v-3.597a1.568 1.568 0 0 1 1.57-1.577zm12.473 0h3.597c.863 0 1.57.707 1.57 1.57v3.604c0 .863-.707 1.571-1.57 1.571h-3.597c-.863 0-1.57-.708-1.57-1.571v-3.597c-.008-.87.7-1.577 1.57-1.577zm12.473 0h3.597c.87 0 1.578.707 1.578 1.57v3.604c0 .863-.708 1.571-1.578 1.571h-3.597c-.863 0-1.57-.708-1.57-1.571v-3.597c0-.87.707-1.577 1.57-1.577zm-12.922-28.212h3.597c.862 0 1.57.708 1.57 1.571v3.597c0 .87-.708 1.57-1.57 1.57h-3.597a1.577 1.577 0 0 1-1.571-1.57v-3.597a1.568 1.568 0 0 1 1.571-1.571zm12.472 0h3.597c.863 0 1.57.708 1.57 1.571v3.597c0 .87-.707 1.57-1.57 1.57h-3.597c-.87 0-1.578-.708-1.578-1.57v-3.597a1.588 1.588 0 0 1 1.578-1.571zM318.698 439.861h3.598c.87 0 1.57.708 1.57 1.57v3.598c0 .869-.708 1.57-1.57 1.57h-3.598c-.862 0-1.57-.708-1.57-1.57v-3.598a1.568 1.568 0 0 1 1.57-1.57zm12.473 0h3.597c.862 0 1.57.708 1.57 1.57v3.598c0 .869-.708 1.57-1.57 1.57h-3.597c-.863 0-1.57-.708-1.57-1.57v-3.598c0-.862.707-1.57 1.57-1.57zm12.48 0h3.597c.863 0 1.571.708 1.571 1.57v3.598c0 .869-.708 1.57-1.571 1.57h-3.597c-.862 0-1.57-.708-1.57-1.57v-3.598c-.007-.862.7-1.57 1.57-1.57zm12.472 0h3.598c.862 0 1.57.708 1.57 1.57v3.598c0 .869-.708 1.57-1.57 1.57h-3.598c-.87 0-1.577-.708-1.577-1.57v-3.598a1.587 1.587 0 0 1 1.577-1.57zm12.473 0h3.598c.87 0 1.577.708 1.577 1.57v3.598c0 .869-.707 1.57-1.577 1.57h-3.598c-.862 0-1.57-.708-1.57-1.57v-3.598c0-.862.708-1.57 1.57-1.57zm-36.968 13.601h3.597c.863 0 1.57.707 1.57 1.57v3.604c0 .863-.707 1.571-1.57 1.571h-3.597c-.87 0-1.57-.708-1.57-1.571v-3.597c-.008-.87.7-1.577 1.57-1.577zm12.472 0h3.597c.863 0 1.571.707 1.571 1.57v3.604c0 .863-.708 1.571-1.571 1.571H344.1c-.862 0-1.57-.708-1.57-1.571v-3.597c-.007-.87.7-1.577 1.57-1.577zm12.473 0h3.598c.869 0 1.577.707 1.577 1.57v3.604c0 .863-.708 1.571-1.577 1.571h-3.598c-.862 0-1.57-.708-1.57-1.571v-3.597c0-.87.708-1.577 1.57-1.577zm-12.922-28.212h3.597c.863 0 1.571.708 1.571 1.571v3.597c0 .87-.708 1.57-1.571 1.57h-3.597c-.862 0-1.57-.708-1.57-1.57v-3.597a1.567 1.567 0 0 1 1.57-1.571zm12.472 0h3.598c.862 0 1.57.708 1.57 1.571v3.597c0 .87-.708 1.57-1.57 1.57h-3.598c-.87 0-1.577-.708-1.577-1.57v-3.597a1.587 1.587 0 0 1 1.577-1.571zm185.495-284.639h3.597c.87 0 1.57.707 1.57 1.57v3.597c0 .87-.708 1.57-1.57 1.57h-3.597c-.863 0-1.57-.707-1.57-1.57v-3.597c-.008-.863.7-1.57 1.57-1.57zm12.472 0h3.597c.862 0 1.57.707 1.57 1.57v3.597c0 .87-.708 1.57-1.57 1.57h-3.597a1.576 1.576 0 0 1-1.571-1.57v-3.597c0-.863.708-1.57 1.571-1.57zm12.48 0h3.597c.863 0 1.571.707 1.571 1.57v3.597c0 .87-.708 1.57-1.571 1.57h-3.597c-.862 0-1.57-.707-1.57-1.57v-3.597c-.007-.863.7-1.57 1.57-1.57zm12.472 0h3.598c.862 0 1.57.707 1.57 1.57v3.597c0 .87-.708 1.57-1.57 1.57h-3.598c-.87 0-1.577-.707-1.577-1.57v-3.597a1.587 1.587 0 0 1 1.577-1.57zm12.473 0h3.598c.87 0 1.577.707 1.577 1.57v3.597c0 .87-.707 1.57-1.577 1.57h-3.598c-.862 0-1.57-.707-1.57-1.57v-3.597c0-.863.708-1.57 1.57-1.57zm-36.968 13.6h3.597c.863 0 1.571.708 1.571 1.57v3.605c0 .862-.708 1.57-1.571 1.57h-3.597c-.87 0-1.57-.708-1.57-1.57v-3.597c-.007-.87.7-1.578 1.57-1.578zm12.472 0h3.598c.862 0 1.57.708 1.57 1.57v3.605c0 .862-.708 1.57-1.57 1.57h-3.598c-.862 0-1.57-.708-1.57-1.57v-3.597c-.007-.87.7-1.578 1.57-1.578zm12.473 0h3.598c.87 0 1.577.708 1.577 1.57v3.605c0 .862-.707 1.57-1.577 1.57h-3.598c-.862 0-1.57-.708-1.57-1.57v-3.597c0-.87.708-1.578 1.57-1.578zM566.57 126h3.597c.863 0 1.571.708 1.571 1.57v3.597c0 .87-.708 1.571-1.571 1.571h-3.597c-.862 0-1.57-.708-1.57-1.571v-3.597c-.007-.862.7-1.57 1.57-1.57zm12.472 0h3.598c.862 0 1.57.708 1.57 1.57v3.597c0 .87-.708 1.571-1.57 1.571h-3.598c-.87 0-1.577-.708-1.577-1.571v-3.597a1.587 1.587 0 0 1 1.577-1.57z",fill:"#E1E4E5"}),m("path",{d:"M107 247.088c14.587-17.039 40.212-44.843 26.019-19.749-17.74 31.367 14.784 10.455 26.02 0 11.235-10.456 37.846-18.007 18.923 9.294-18.923 27.3 35.481 11.036 45.534-9.294",stroke:"#E1E4E5","stroke-width":"4.355"}),m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M625.244 189.227c0-32.6 26.428-59.027 59.028-59.027h50.701c32.6 0 59.027 26.427 59.027 59.027s-26.427 59.028-59.027 59.028h-16.962l-26.588 21.366c-1.968 1.582-4.892.181-4.892-2.345v-19.021h-2.259c-32.6 0-59.028-26.428-59.028-59.028z",fill:"#666AF6"}),m("rect",{width:"43.623",height:"7.036",rx:"3.518",transform:"matrix(-1 0 0 1 750.256 167.808)",fill:"#fff"}),m("rect",{width:"66.842",height:"7.036",rx:"3.518",transform:"matrix(-1 0 0 1 750.256 186.102)",fill:"#fff"}),m("rect",{width:"91.468",height:"7.036",rx:"3.518",transform:"matrix(-1 0 0 1 750.256 204.396)",fill:"#fff"}),m("circle",{r:"10.343",transform:"matrix(-1 0 0 1 654.343 99.343)",fill:"#E1E4E5"}),m("circle",{r:"4",transform:"matrix(-1 0 0 1 491 144)",fill:"#E1E4E5"}),m("circle",{r:"10.343",transform:"matrix(-1 0 0 1 155.449 290.79)",fill:"#E1E4E5"}),m("circle",{r:"10.343",transform:"matrix(-1 0 0 1 552.842 433.416)",fill:"#E1E4E5"}),m("circle",{r:"5.444",transform:"matrix(-1 0 0 1 623.067 286.979)",fill:"#E1E4E5"}),m("circle",{r:"5.444",transform:"matrix(-1 0 0 1 197.366 485.132)",fill:"#E1E4E5"}))},e}(i());const y=flarum.core.compat["forum/components/SignUpModal"];var g=t.n(y),w=function(t){function e(){return t.apply(this,arguments)||this}return c(e,t),e.prototype.view=function(){return m(b,{routeSwitcher:this.attrs.routeSwitcher,animateShow:function(){return null}})},e}(i()),b=function(t){function e(){return t.apply(this,arguments)||this}c(e,t);var r=e.prototype;return r.title=function(){return[h()("fas fa-user-plus"),t.prototype.title.call(this)]},r.view=function(){var e,r=t.prototype.view.call(this);return r.attrs.className=null==(e=r.attrs)||null==(e=e.className)?void 0:e.replace("fade",""),r},r.footer=function(){var e=t.prototype.footer.call(this);return e[0]=this.attrs.routeSwitcher(),e},e}(g());b.isDismissible=!1;const _=flarum.core.compat["common/components/Button"];var x=t.n(_);const z=flarum.core.compat["common/utils/extractText"];var E=t.n(z);const F=flarum.core.compat["common/components/Page"];var P=t.n(F);const A=flarum.core.compat["common/utils/classList"];var N=t.n(A),S=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this).currentRoute=void 0,e.routes=void 0,e}c(e,t);var r=e.prototype;return r.oninit=function(e){t.prototype.oninit.call(this,e),this.routes={"sycho-private-facade.login":{label:E()(a().translator.trans("sycho-private-facade.forum.log_in_label")),component:v,next:"sycho-private-facade.signup"},"sycho-private-facade.signup":{label:E()(a().translator.trans("sycho-private-facade.forum.sign_up_label")),component:w,next:"sycho-private-facade.login"}},this.currentRoute=this.routes[a().current.data.routeName],a().setTitle(this.currentRoute.label),document.body.classList.contains("body--privateFacade")||document.body.classList.add("body--privateFacade");var r=!["show_only_logo","hide_secondary_items"].includes(a().forum.attribute("sycho-private-facade.header_layout"));this.bodyClass=N()({"App--privateFacade":!0,"App--privateFacade--showHeader":r,"App--privateFacade--logoOnly":!r,"App--privateFacade--primaryBg":a().forum.attribute("sycho-private-facade.primary_color_bg")})},r.view=function(){var t=this;return m("div",{className:"PrivateFacade"},m("div",{className:"PrivateFacade-container container"},m("div",{className:"PrivateFacade-AuthView"},m("div",{className:"PrivateFacade-AuthView-interface","data-primary-background":a().forum.attribute("sycho-private-facade.primary_color_bg")},m("h2",{className:"PrivateFacade-AuthView-interface-title"},a().forum.attribute("sycho-private-facade.screen_banner_title")),m("p",{className:"PrivateFacade-AuthView-interface-message"},m.trust(a().forum.attribute("sycho-private-facade.screen_banner_message"))),m(d,null)),m("div",{className:"PrivateFacade-AuthView-form"},m(this.currentRoute.component,{routeSwitcher:function(){return a().forum.attribute("allowSignUp")?m("[",null,m("div",{className:"PrivateFacade-AuthView-separator"},m("span",{class:"PrivateFacade-AuthView-separator-label"},a().translator.trans("sycho-private-facade.forum.or_label"))),m(x(),{className:"Button Button--block PrivateFacade-Button--outline PrivateFacade-Button",onclick:function(){var e,r;["sycho-private-facade.login","sycho-private-facade.signup"].includes(null==(e=a().history.getPrevious())?void 0:e.name)&&(null==(r=a().history.getPrevious())?void 0:r.name)===t.currentRoute.next?a().history.back():(a().history.push(t.currentRoute.next,t.routes[t.currentRoute.next].label,a().route(t.currentRoute.next)),m.route.set(a().route(t.currentRoute.next)))}},t.routes[t.currentRoute.next].label)):null}})))))},e}(P());const M=flarum.core.compat["forum/components/HeaderPrimary"];var B=t.n(M);const k=flarum.core.compat["common/extend"],R=flarum.core.compat["forum/components/HeaderSecondary"];var O=t.n(R);const j=flarum.core.compat["common/components/Navigation"];var V=t.n(j);const H=flarum.core.compat["common/components/LinkButton"];var L=t.n(H);const C=flarum.core.compat["common/resolvers/DefaultResolver"];var T=t.n(C);a().initializers.add("sycho/flarum-private-facade",(function(){a().routes["sycho-private-facade.login"]={path:"/login",component:S},a().routes["sycho-private-facade.signup"]={path:"/signup",component:S};var t=function(){return["sycho-private-facade.login","sycho-private-facade.signup"].includes(a().current.data.routeName)};(0,k.override)(O().prototype,"view",(function(e){if(t()&&["show_only_logo","hide_secondary_items"].includes(a().forum.attribute("sycho-private-facade.header_layout")))return null;for(var r=arguments.length,o=new Array(r>1?r-1:0),c=1;c<r;c++)o[c-1]=arguments[c];return e.apply(void 0,o)})),(0,k.override)(B().prototype,"view",(function(e){if(t()&&"show_only_logo"===a().forum.attribute("sycho-private-facade.header_layout"))return null;for(var r=arguments.length,o=new Array(r>1?r-1:0),c=1;c<r;c++)o[c-1]=arguments[c];var n=e.apply(void 0,o);return t()&&n&&a().forum.attribute("sycho-private-facade.primary_color_bg")&&"show_header"!==a().forum.attribute("sycho-private-facade.header_layout")&&(n.attrs["data-primary-background"]=!0),n})),(0,k.override)(V().prototype,"getBackButton",(function(e){if(t())return null;for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return e.apply(void 0,a)})),(0,k.extend)(O().prototype,"items",(function(t){t.has("logIn")&&t.setContent("logIn",m(L(),{className:"Button Button--link",href:a().route("sycho-private-facade.login")},a().translator.trans("core.forum.header.log_in_link"))),t.has("signUp")&&t.setContent("signUp",m(L(),{className:"Button Button--link",href:a().route("sycho-private-facade.signup")},a().translator.trans("core.forum.header.sign_up_link")))})),(0,k.override)(T().prototype,"onmatch",(function(t,e,r,o){var c=a().forum.attribute("sycho-private-facade.url_exclusions");return a().session.user||!a().forum.attribute("sycho-private-facade.force_redirect")||a().forum.attribute("sycho-private-facade.route_exclusions").includes(this.routeName)||c.some((function(t){return t.includes("*")?new RegExp(t.replace(/\*/g,".*").replace(/\//g,"\\/")).test(r):t===r}))?t(e,r,o):m.route.set(a().route("sycho-private-facade.login"))}))}))})(),module.exports=e})();
//# sourceMappingURL=forum.js.map